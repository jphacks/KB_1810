# -*- coding: utf-8 -*-
from flask import Flask, render_template, request, jsonify
import mysql.connector
import numpy as np
from PIL import Image
import io


app = Flask(__name__)
app.config['JSON_AS_ASCII'] = False #日本語文字化け対策
app.config["JSON_SORT_KEYS"] = False #ソートをそのまま


@app.route('/good', methods = ['POST'])
def good():
    #import main
    img_data = request.files['img_data'].read()
    img = Image.open(io.BytesIO(img_data))
    img.save('test.jpg')

    #z = main.color_detection('kondate.jpg')
    name = "Good"
    return name

@app.route('/php')
def php():
    data = file_get_contents("php://input")
    fp = fopen("/tmp/data.jpg", 'wb')
    fwrite(fp, data)
    fclose(fp)
    print("Image Upload Finish.")

@app.route('/test')
def test():
    name = "test"
    print('成功')
    return name

@app.route('/url',methods = ['POST' ])
def url():
    url=request.form['url']
    data = jsonify({
        "url":url,
    })
    return url

## おまじない
if __name__ == "__main__":
        app.run(debug=True)
